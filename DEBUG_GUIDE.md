# üîç –ì–∞–π–¥ –ø–æ –æ—Ç–ª–∞–¥–∫–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å—Ç–∞—Ç—É—Å–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∞–¥–º–∏–Ω–∫–∏

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
–í Mini App –Ω–∞–∂–º–∏—Ç–µ F12 –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ DevTools

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–í –∫–æ–Ω—Å–æ–ª–∏ –≤–≤–µ–¥–∏—Ç–µ:
```javascript
checkMyStatus()
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
- URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—á—Ç–æ –ø—Ä–∏—à–ª–æ –∏–∑ –±–æ—Ç–∞)
- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ URL
- –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–æ–º

### 3. –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

#### ‚úÖ –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –µ—Å—Ç—å –ª–∏ —Å—Ç—Ä–æ–∫–∞: `üîç URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: ...`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –µ—Å—Ç—å –ª–∏ `user_id` –≤ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `üíæ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ –ë–î: ...`

#### ‚úÖ –ï—Å–ª–∏ –∞–≤–∞—Ç–∞—Ä –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏: `üì∑ –ê–≤–∞—Ç–∞—Ä URL: ...`
2. –ï—Å–ª–∏ URL = `null`, –∑–Ω–∞—á–∏—Ç —Ñ–æ—Ç–æ –Ω–µ –±—ã–ª–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ Telegram
3. –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º `/start` –≤ –±–æ—Ç–µ

#### ‚úÖ –ï—Å–ª–∏ –∞–¥–º–∏–Ω–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏: `üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –ø—Ä–∞–≤ –¥–ª—è user_id: ...`
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `üîê –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∞: ...`
3. –ï—Å–ª–∏ `isAdmin: false` - –≤–∞—Å –Ω–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `admins`

---

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–±—è –∞–¥–º–∏–Ω–æ–º

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ SQL (–≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö)

1. **–ù–∞–π–¥–∏—Ç–µ –≤–∞—à user_id:**
```sql
SELECT id, telegram_id, first_name FROM users WHERE telegram_id = '–í–ê–®_TELEGRAM_ID';
```

2. **–î–æ–±–∞–≤—å—Ç–µ —Å–µ–±—è –≤ –∞–¥–º–∏–Ω—ã:**
```sql
INSERT INTO admins (user_id, permissions)
VALUES (–í–ê–®_USER_ID, '{"all": true}');
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```sql
SELECT a.id, a.user_id, u.telegram_id, u.first_name, a.permissions
FROM admins a
JOIN users u ON a.user_id = u.id;
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë—ã—Å—Ç—Ä–æ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å

```sql
-- –ó–∞–º–µ–Ω–∏—Ç–µ 123456789 –Ω–∞ –≤–∞—à Telegram ID
INSERT INTO admins (user_id, permissions)
SELECT id, '{"all": true}'::jsonb
FROM users
WHERE telegram_id = 123456789;
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

```bash
# –í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞
psql -U postgres -d your_database -f scripts/add-admin.sql
```

---

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è

### 1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —á—Ç–æ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç

–í –∫–æ–Ω—Å–æ–ª–∏ –±–æ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ –ø—Ä–∏ `/start`:
```
‚úÖ –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω: TELEGRAM_ID (–ò–ú–Ø)
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –∫–Ω–æ–ø–∫–∏

URL –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
```
https://your-app.com?user_id=123&first_name=John&last_name=Doe&username=johndoe&photo_url=https://...
```

### 3. –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:

```
üîç URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: {user_id: "123", first_name: "John", ...}
‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: {id: 123, first_name: "John", ...}
üíæ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ –ë–î: {id: 1, telegram_id: 123, ...}
üì∑ –ê–≤–∞—Ç–∞—Ä URL: https://...
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –≤ UI
```

---

## –°–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –∞–¥–º–∏–Ω–æ–≤

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–æ–≤:
```sql
SELECT
  a.id as admin_id,
  u.id as user_id,
  u.telegram_id,
  u.first_name,
  u.last_name,
  a.permissions,
  a.created_at
FROM admins a
JOIN users u ON a.user_id = u.id
ORDER BY a.created_at DESC;
```

---

## –£–¥–∞–ª–∏—Ç—å –∞–¥–º–∏–Ω–∞

```sql
DELETE FROM admins WHERE user_id = –í–ê–®_USER_ID;
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
- `checkMyStatus()` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å
- `window.currentUser` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `window.isAdmin` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞
- `window.userDataFromUrl` - –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—à–µ–¥—à–∏–µ –∏–∑ URL

### –í –∫–æ–Ω—Å–æ–ª–∏ –±–æ—Ç–∞ (–ª–æ–≥–∏):
- –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å `‚úÖ` –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å `‚ùå` –¥–ª—è –æ—à–∏–±–æ–∫
- –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å `üîê` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

---

## FAQ

**Q: –ü–æ—á–µ–º—É –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤–∞—Ç–∞—Ä?**
A: –ê–≤–∞—Ç–∞—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º `/start`. –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç —Ñ–æ—Ç–æ –≤ Telegram, –∞–≤–∞—Ç–∞—Ä –±—É–¥–µ—Ç –ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –∏–º–µ–Ω–∏.

**Q: –ü–æ—á–µ–º—É –∞–¥–º–∏–Ω–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤–∞—à `user_id` (–Ω–µ telegram_id!) –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ `admins`.

**Q: –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π user_id?**
A: –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `checkMyStatus()` –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `üë§ ID: ...`

**Q: –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ URL?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `WEB_APP_URL` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ `.env` —Ñ–∞–π–ª–µ.
